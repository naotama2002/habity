# UI/UX 設計

## 概要

Bluesky social-app のナビゲーション構成を参考に、Habity の UI/UX を設計。

## ナビゲーション構成

### ネイティブ (iOS / Android / macOS)

Bottom Tab Navigator + Stack Navigator の組み合わせ。

```
┌─────────────────────────────────────────────────────────────┐
│                         App Shell                            │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                      [Screen Content]                        │
│                                                              │
├─────────────────────────────────────────────────────────────┤
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐                    │
│  │Today │  │Habits│  │Stats │  │ Settings │                    │
│  │  ◉   │  │  ☰   │  │  📊  │  │  ⚙️   │                    │
│  └──────┘  └──────┘  └──────┘  └──────┘                    │
└─────────────────────────────────────────────────────────────┘
```

**タブ:**
| タブ | アイコン | ルート画面 | 説明 |
|------|---------|-----------|------|
| Today | ◉ (circle.fill) | TodayScreen | 今日の習慣一覧 |
| Habits | ☰ (list.bullet) | HabitsScreen | 全習慣の管理 |
| Stats | 📊 (chart.bar) | StatisticsScreen | 統計・分析 |
| Settings | ⚙️ (gear) | SettingsScreen | アプリ設定 |

### Web

サイドバー + メインコンテンツのレイアウト。Flat Navigator。

```
┌──────────────────────────────────────────────────────────────────┐
│  Habity                                           [User Avatar]  │
├────────────┬─────────────────────────────────────────────────────┤
│            │                                                     │
│  Today     │                                                     │
│  Habits    │              [Screen Content]                       │
│  Stats     │                                                     │
│  ───────   │                                                     │
│  Settings  │                                                     │
│            │                                                     │
└────────────┴─────────────────────────────────────────────────────┘
```

---

## 画面一覧

### 認証フロー

| 画面 | ルート名 | 説明 |
|------|---------|------|
| ウェルカム | Welcome | 初回起動時、ログイン/サインアップ選択 |
| ログイン | Login | Google ログインボタン |

### メインフロー

| 画面 | ルート名 | タブ | 説明 |
|------|---------|-----|------|
| 今日の習慣 | Today | TodayTab | 今日実行すべき習慣一覧 |
| 習慣一覧 | Habits | HabitsTab | 全習慣の一覧・管理 |
| 習慣詳細 | HabitDetail | - | 習慣の詳細・履歴 |
| 習慣作成 | HabitCreate | - | 新規習慣作成 |
| 習慣編集 | HabitEdit | - | 習慣の編集 |
| 統計 | Statistics | StatsTab | 全体統計ダッシュボード |
| 習慣別統計 | HabitStatistics | - | 個別習慣の統計 |
| 設定 | Settings | SettingsTab | アプリ設定トップ |
| アカウント | AccountSettings | - | アカウント設定 |
| 外観 | AppearanceSettings | - | テーマ設定 |
| 通知 | NotificationSettings | - | 通知設定 |
| インポート | ImportSettings | - | Habitify インポート |
| カテゴリ管理 | CategorySettings | - | カテゴリ編集 |

---

## 画面フロー図

```
                    ┌─────────────┐
                    │   Welcome   │
                    └──────┬──────┘
                           │
                    ┌──────▼──────┐
                    │    Login    │
                    │  (Google)   │
                    └──────┬──────┘
                           │
         ┌─────────────────┼─────────────────┐
         │                 │                 │
   ┌─────▼─────┐    ┌─────▼─────┐    ┌─────▼─────┐
   │   Today   │    │  Habits   │    │  Stats    │
   │   (Tab)   │    │   (Tab)   │    │  (Tab)    │
   └─────┬─────┘    └─────┬─────┘    └─────┬─────┘
         │                │                │
         │          ┌─────▼─────┐          │
         └─────────▶│  Habit    │◀─────────┘
                    │  Detail   │
                    └─────┬─────┘
                          │
                    ┌─────▼─────┐
                    │  Habit    │
                    │   Edit    │
                    └───────────┘


   ┌─────────────┐
   │  Settings   │
   │   (Tab)     │
   └──────┬──────┘
          │
    ┌─────┼─────┬─────────┬───────────┐
    │     │     │         │           │
┌───▼──┐┌─▼──┐┌─▼───┐┌────▼────┐┌────▼────┐
│Account││外観││通知 ││ Import  ││Category │
└──────┘└────┘└─────┘└─────────┘└─────────┘
```

---

## ワイヤーフレーム

### 1. Today 画面（ホーム）

今日実行すべき習慣を時間帯別に表示。

```
┌─────────────────────────────────────────┐
│ ← Today                           [+]  │
├─────────────────────────────────────────┤
│                                         │
│  2024年1月15日（月）                    │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  3/5 完了  ████████░░░░ 60%            │
│                                         │
├─────────────────────────────────────────┤
│  🌅 朝                                  │
│  ┌─────────────────────────────────┐   │
│  │ ☐ 瞑想する           5分        │   │
│  │    🔥 12日連続                   │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ ☑ 水を飲む           500ml ✓    │   │
│  │    🔥 30日連続                   │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  🌤️ 日中                                │
│  ┌─────────────────────────────────┐   │
│  │ ☐ 読書する           30分       │   │
│  │    🔥 5日連続                    │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  🌙 夜                                  │
│  ┌─────────────────────────────────┐   │
│  │ ☑ ストレッチ         10分 ✓     │   │
│  │    🔥 8日連続                    │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ ☐ 日記を書く                    │   │
│  │    🔥 3日連続                    │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
│ [Today] [Habits] [Stats] [Settings]    │
└─────────────────────────────────────────┘
```

**インタラクション:**
- 習慣カードをタップ → チェックイン（トグル）
- 習慣カードを長押し / 右スワイプ → 詳細画面へ
- [+] ボタン → 新規習慣作成
- 日付をタップ → カレンダーで日付選択

### 2. Habits 画面（習慣一覧）

全習慣をカテゴリ別に管理。

```
┌─────────────────────────────────────────┐
│ Habits                      [+] [編集] │
├─────────────────────────────────────────┤
│  🔍 検索...                             │
├─────────────────────────────────────────┤
│  [すべて] [アクティブ] [アーカイブ]     │
├─────────────────────────────────────────┤
│                                         │
│  💪 健康 (3)                      [▼]  │
│  ┌─────────────────────────────────┐   │
│  │ 瞑想する                        │   │
│  │ 毎日 • 🔥 12日                  │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ 水を飲む                        │   │
│  │ 毎日 • 🔥 30日                  │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ ストレッチ                      │   │
│  │ 平日 • 🔥 8日                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  📚 学習 (2)                      [▼]  │
│  ┌─────────────────────────────────┐   │
│  │ 読書する                        │   │
│  │ 毎日 • 🔥 5日                   │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ 日記を書く                      │   │
│  │ 毎日 • 🔥 3日                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  未分類 (0)                       [▼]  │
│                                         │
└─────────────────────────────────────────┘
```

### 3. 習慣詳細画面

```
┌─────────────────────────────────────────┐
│ ←                              [編集]  │
├─────────────────────────────────────────┤
│                                         │
│           💧                            │
│        水を飲む                         │
│                                         │
│   🔥 30日連続      📊 95% 達成率       │
│                                         │
├─────────────────────────────────────────┤
│  今日の進捗                             │
│  ┌─────────────────────────────────┐   │
│  │    500ml / 2000ml               │   │
│  │    ████░░░░░░░░░░░░  25%        │   │
│  │                                  │   │
│  │  [-100]  [+100]  [+500]  [達成] │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  履歴                                   │
│  ┌─────────────────────────────────┐   │
│  │     1月 2024                    │   │
│  │  日 月 火 水 木 金 土           │   │
│  │        1  2  3  4  5  6        │   │
│  │        ●  ●  ●  ●  ●  ○        │   │
│  │   7  8  9 10 11 12 13          │   │
│  │   ●  ●  ●  ●  ●  ●  ●          │   │
│  │  14 15                          │   │
│  │   ●  ◐                          │   │
│  └─────────────────────────────────┘   │
│  ● 達成  ◐ 進行中  ○ 未達成  ・ 予定なし│
│                                         │
├─────────────────────────────────────────┤
│  詳細                                   │
│  ・目標: 2000ml / 日                    │
│  ・スケジュール: 毎日                   │
│  ・時間帯: いつでも                     │
│  ・開始日: 2023年12月16日               │
│  ・カテゴリ: 💪 健康                    │
│                                         │
└─────────────────────────────────────────┘
```

### 4. 習慣作成/編集画面

```
┌─────────────────────────────────────────┐
│ ← 新しい習慣                   [保存]  │
├─────────────────────────────────────────┤
│                                         │
│  習慣名 *                               │
│  ┌─────────────────────────────────┐   │
│  │ 瞑想する                        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  説明                                   │
│  ┌─────────────────────────────────┐   │
│  │ 毎朝10分間の瞑想で心を整える    │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  トラッキング方法                       │
│  ┌─────────────────────────────────┐   │
│  │ [● チェック] [○ 数値] [○ 時間] │   │
│  └─────────────────────────────────┘   │
│                                         │
│  目標（数値/時間の場合）                │
│  ┌──────────┐  ┌──────────────────┐   │
│  │    10    │  │  分 ▼           │   │
│  └──────────┘  └──────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  スケジュール                           │
│  ┌─────────────────────────────────┐   │
│  │ [● 毎日] [○ 特定の曜日] [○ 間隔]│   │
│  └─────────────────────────────────┘   │
│                                         │
│  曜日（特定の曜日の場合）               │
│  [月✓] [火✓] [水✓] [木✓] [金✓] [土] [日]│
│                                         │
│  時間帯                                 │
│  [朝✓] [日中] [夕方] [夜] [いつでも]   │
│                                         │
├─────────────────────────────────────────┤
│  リマインダー                           │
│  ┌─────────────────────────────────┐   │
│  │ [ON]  08:00                 [+] │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  カテゴリ                               │
│  ┌─────────────────────────────────┐   │
│  │ 💪 健康                      ▼  │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  開始日                                 │
│  ┌─────────────────────────────────┐   │
│  │ 2024年1月15日                ▼  │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

### 5. Statistics 画面

```
┌─────────────────────────────────────────┐
│ Statistics                              │
├─────────────────────────────────────────┤
│                                         │
│  期間: [今週 ▼]                         │
│                                         │
├─────────────────────────────────────────┤
│  概要                                   │
│  ┌─────────────────────────────────┐   │
│  │  ┌───────┐ ┌───────┐ ┌───────┐ │   │
│  │  │  78%  │ │  5    │ │  12   │ │   │
│  │  │達成率 │ │習慣数 │ │最長連続│ │   │
│  │  └───────┘ └───────┘ └───────┘ │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  週間達成率                             │
│  ┌─────────────────────────────────┐   │
│  │  100% ┤                         │   │
│  │       │      ▄▄                 │   │
│  │   75% ┤   ▄▄ ██ ▄▄             │   │
│  │       │▄▄ ██ ██ ██ ▄▄          │   │
│  │   50% ┤██ ██ ██ ██ ██ ▄▄       │   │
│  │       │██ ██ ██ ██ ██ ██       │   │
│  │   25% ┤██ ██ ██ ██ ██ ██ ▄▄    │   │
│  │       │██ ██ ██ ██ ██ ██ ██    │   │
│  │    0% └─────────────────────    │   │
│  │        月 火 水 木 金 土 日     │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  習慣別達成率                           │
│  ┌─────────────────────────────────┐   │
│  │ 水を飲む         ████████████ 100%│  │
│  │ 瞑想する         ██████████░░  85%│  │
│  │ ストレッチ       ████████░░░░  71%│  │
│  │ 読書する         ██████░░░░░░  57%│  │
│  │ 日記を書く       ████░░░░░░░░  42%│  │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  ベストストリーク 🔥                    │
│  ┌─────────────────────────────────┐   │
│  │ 1. 水を飲む           30日      │   │
│  │ 2. 瞑想する           12日      │   │
│  │ 3. ストレッチ          8日      │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

### 6. Settings 画面

```
┌─────────────────────────────────────────┐
│ Settings                                │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  👤  user@example.com           │   │
│  │      Google アカウント          │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  一般                                   │
│  ┌─────────────────────────────────┐   │
│  │ 🎨 外観                      ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ 🔔 通知                      ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ 🌐 言語               日本語 ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ 📅 週の開始日           月曜 ▶  │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  データ                                 │
│  ┌─────────────────────────────────┐   │
│  │ 📁 カテゴリ管理              ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ 📥 Habitify からインポート   ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ 📤 データエクスポート        ▶  │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  サポート                               │
│  ┌─────────────────────────────────┐   │
│  │ ❓ ヘルプ                    ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ 📝 フィードバック            ▶  │   │
│  ├─────────────────────────────────┤   │
│  │ ℹ️  このアプリについて        ▶  │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  ┌─────────────────────────────────┐   │
│  │ 🚪 ログアウト                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│           Habity v1.0.0                 │
│                                         │
└─────────────────────────────────────────┘
```

### 7. Habitify インポート画面

```
┌─────────────────────────────────────────┐
│ ← Habitify からインポート               │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                  │   │
│  │      📥                          │   │
│  │                                  │   │
│  │   Habitify のデータを            │   │
│  │   Habity にインポート            │   │
│  │                                  │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  API キーの取得方法:                    │
│                                         │
│  1. Habitify アプリを開く               │
│  2. 設定 → API Credential へ移動       │
│  3. API キーをコピー                    │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│  API キー                               │
│  ┌─────────────────────────────────┐   │
│  │ xxxxxxxx-xxxx-xxxx-xxxx-xxxxxx  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  インポート対象                         │
│  ┌─────────────────────────────────┐   │
│  │ [✓] 習慣データ                  │   │
│  │ [✓] 完了ログ                    │   │
│  │ [✓] カテゴリ（エリア）          │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ログの期間                             │
│  ┌─────────────────────────────────┐   │
│  │ [● 全期間] [○ 過去1年] [○ 過去6ヶ月]│  │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │         インポート開始          │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

---

## コンポーネント設計

### 共通コンポーネント

```
src/components/
├── Button.tsx              # ボタン（Primary, Secondary, Ghost）
├── Card.tsx                # カードコンテナ
├── Checkbox.tsx            # チェックボックス
├── Header.tsx              # 画面ヘッダー
├── Icon.tsx                # アイコンラッパー
├── Input.tsx               # テキスト入力
├── Modal.tsx               # モーダルダイアログ
├── ProgressBar.tsx         # プログレスバー
├── ProgressRing.tsx        # 円形プログレス
├── SegmentedControl.tsx    # セグメントコントロール
├── Select.tsx              # セレクトボックス
├── Spinner.tsx             # ローディング
├── Switch.tsx              # トグルスイッチ
├── TabBar.tsx              # タブバー
└── Toast.tsx               # トースト通知
```

### 習慣関連コンポーネント

```
src/components/habits/
├── HabitCard.tsx           # 習慣カード（Today用）
├── HabitListItem.tsx       # 習慣リストアイテム
├── HabitCalendar.tsx       # 習慣カレンダー
├── StreakBadge.tsx         # ストリークバッジ
├── GoalProgress.tsx        # 目標進捗
├── TimeOfDaySection.tsx    # 時間帯セクション
└── CategorySection.tsx     # カテゴリセクション
```

### 統計コンポーネント

```
src/components/stats/
├── StatCard.tsx            # 統計カード
├── BarChart.tsx            # 棒グラフ
├── HabitProgressBar.tsx    # 習慣進捗バー
└── StreakRanking.tsx       # ストリークランキング
```

---

## カラーパレット

```typescript
// src/lib/colors.ts

export const colors = {
  // Primary
  primary: {
    50:  '#eef2ff',
    100: '#e0e7ff',
    500: '#6366f1',  // メインカラー
    600: '#4f46e5',
    700: '#4338ca',
  },

  // Success (完了)
  success: {
    50:  '#ecfdf5',
    500: '#10b981',
    600: '#059669',
  },

  // Warning (進行中)
  warning: {
    50:  '#fffbeb',
    500: '#f59e0b',
    600: '#d97706',
  },

  // Error
  error: {
    50:  '#fef2f2',
    500: '#ef4444',
    600: '#dc2626',
  },

  // Gray (テキスト、背景)
  gray: {
    50:  '#f9fafb',
    100: '#f3f4f6',
    200: '#e5e7eb',
    300: '#d1d5db',
    400: '#9ca3af',
    500: '#6b7280',
    600: '#4b5563',
    700: '#374151',
    800: '#1f2937',
    900: '#111827',
  },

  // Streak (炎)
  streak: '#f97316',  // Orange
};

// ダークモード
export const darkColors = {
  background: '#0f172a',
  surface: '#1e293b',
  text: '#f1f5f9',
  textSecondary: '#94a3b8',
};
```

---

## タイポグラフィ

```typescript
// src/lib/typography.ts

export const typography = {
  // 見出し
  h1: {
    fontSize: 32,
    fontWeight: '700',
    lineHeight: 40,
  },
  h2: {
    fontSize: 24,
    fontWeight: '600',
    lineHeight: 32,
  },
  h3: {
    fontSize: 20,
    fontWeight: '600',
    lineHeight: 28,
  },

  // 本文
  body: {
    fontSize: 16,
    fontWeight: '400',
    lineHeight: 24,
  },
  bodySmall: {
    fontSize: 14,
    fontWeight: '400',
    lineHeight: 20,
  },

  // キャプション
  caption: {
    fontSize: 12,
    fontWeight: '400',
    lineHeight: 16,
  },

  // ボタン
  button: {
    fontSize: 16,
    fontWeight: '600',
    lineHeight: 24,
  },
};
```

---

## アニメーション

```typescript
// チェックイン時
// - チェックマークが弾むようにアニメーション (spring)
// - 完了時に軽い振動フィードバック (haptics)
// - カードが軽く縮小→拡大 (scale 0.95 → 1.0)

// ストリーク更新時
// - 炎アイコンが揺れるアニメーション
// - 数字がカウントアップ

// 画面遷移
// - スタック: 右からスライドイン
// - モーダル: 下からスライドアップ
// - タブ: クロスフェード
```

---

## 参考

- [Bluesky social-app Navigation](https://github.com/bluesky-social/social-app/blob/main/src/Navigation.tsx)
- [Habitify](https://habitify.me) - 機能参考
- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [Material Design](https://m3.material.io/)
